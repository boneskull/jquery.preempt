!function($){"use strict";var PLUGIN_NAME="preempt",instance_id="plugin."+PLUGIN_NAME,SCRIPT_URL="javascript:",Preempt=function(a){this._name=PLUGIN_NAME,this._element=a,this._prefix=!1};Preempt.prototype.init=function init(attr,new_evt,js_id,callback){var el=this._element,js=el.attr(attr)||"",preemptor=function preemptor(evt){return callback.call(el,evt),eval("(function(){ "+js+"}).call(window);")};callback=callback||$.noop,0===js.indexOf(SCRIPT_URL)&&(this._prefix=!0,js=js.substring(11)),el.removeAttr(attr).off(new_evt).on(new_evt,preemptor),el.data(js_id,js)},Preempt.prototype.restore=function(a,b,c){var d=this._element,e=d.data(c);d.attr(a,this._prefix?SCRIPT_URL+e:e).off(b),d.removeData(c)},jQuery.fn.preempt=function(a,b){var c=$(this);return c.each(function(){var d,e=c.data(instance_id),f=a.attr,g=a.event,h=!!a.restore;if(b=b||$.noop,!f||!g)throw new Error("jquery.preempt: options.attr and opts.event are required");if(d=instance_id+"."+f+"."+g+".js",!e){if(a.restore)return;e=new Preempt(c),c.data(instance_id,e)}c.data(d)?h&&e.restore(f,g,d):e.init(f,g,d,b)})}}(jQuery);